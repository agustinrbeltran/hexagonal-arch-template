## ADDED Requirements

### Requirement: AccountProvisioner port at account/application/shared/account_provisioner.py
The system SHALL define an `AccountProvisioner` protocol in `account/application/shared/account_provisioner.py` with a single async method: `register(email: Email, password: RawPassword) -> AccountId`. This port abstracts credential registration with an external auth provider. The `Email` and `RawPassword` value objects SHALL be validated before reaching the port.

#### Scenario: AccountProvisioner is a Protocol
- **WHEN** inspecting `AccountProvisioner` in `account/application/shared/account_provisioner.py`
- **THEN** it is defined as a `typing.Protocol` with an abstract `register` method

#### Scenario: Register returns the provider-generated AccountId
- **WHEN** `register(email, password)` is called with valid credentials
- **THEN** it returns an `AccountId` wrapping the UUID generated by the auth provider

#### Scenario: Register raises on duplicate email
- **WHEN** `register(email, password)` is called with an email that already exists in the auth provider
- **THEN** an `EmailAlreadyExistsError` is raised

### Requirement: PasswordResetter port at account/application/shared/password_resetter.py
The system SHALL define a `PasswordResetter` protocol in `account/application/shared/password_resetter.py` with a single async method: `reset_password(account_id: AccountId, new_password: RawPassword) -> None`. This port abstracts password changes with an external auth provider.

#### Scenario: PasswordResetter is a Protocol
- **WHEN** inspecting `PasswordResetter` in `account/application/shared/password_resetter.py`
- **THEN** it is defined as a `typing.Protocol` with an abstract `reset_password` method

#### Scenario: Reset password succeeds for valid account
- **WHEN** `reset_password(account_id, new_password)` is called for an existing account
- **THEN** the password is updated in the auth provider and the method returns None

### Requirement: SignUpHandler uses AccountProvisioner
The `SignUpHandler` SHALL use `AccountProvisioner.register()` to create credentials in the auth provider, then create the `Account` aggregate with the returned `AccountId` and save metadata via `AccountRepository`. The handler SHALL NOT depend on `AccountService`.

#### Scenario: Sign up creates credentials then saves metadata
- **WHEN** `SignUpHandler.execute(SignUpCommand)` is called
- **THEN** it calls `AccountProvisioner.register(email, password)` to get an `AccountId`
- **AND** creates an `Account` via `Account.create(id_=account_id, email=email)`
- **AND** saves the account metadata via `AccountRepository.save()`
- **AND** dispatches domain events
- **AND** commits via `AccountUnitOfWork`

#### Scenario: Sign up propagates duplicate email error
- **WHEN** `AccountProvisioner.register()` raises `EmailAlreadyExistsError`
- **THEN** the error propagates to the caller

### Requirement: ChangePasswordHandler uses PasswordResetter
The `ChangePasswordHandler` SHALL use `PasswordResetter.reset_password()` to change the password in the auth provider. It SHALL NOT depend on `AccountService`.

#### Scenario: Change password delegates to PasswordResetter
- **WHEN** `ChangePasswordHandler.execute(ChangePasswordCommand)` is called
- **THEN** it calls `PasswordResetter.reset_password(account_id, new_password)`
